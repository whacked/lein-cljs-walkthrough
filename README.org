#+PROPERTY: header-args:sh :results output

* what is this?

  we go from a plain =lein new= to a working =lein cljsbuild once= project, documenting *each step*

* init

#+BEGIN_SRC sh
lein new lein-cljs-walkthrough
#+END_SRC
#+RESULTS:
: Generating a project called lein-cljs-walkthrough based on the 'default' template.
: The default template is intended for library projects, not applications.
: To see other templates (app, plugin, etc), try `lein help new`.

* adding cljsbuild dependencies

  at this point =cljsbuild= does nothing (note the =exec...:= block is used to redirect STDERR so the output gets captured.
In reality you only run the commands in between, i.e. =lein cljsbuild once=:

  #+BEGIN_SRC sh
  exec 2>&1
  lein cljsbuild once
  :
  #+END_SRC

  #+RESULTS:
  : 'cljsbuild' is not a task. See 'lein help'.

** update [[project.clj]] with minimal cljsbuild dependencies

   #+BEGIN_SRC sh
   lein cljsbuild once
   #+END_SRC

   #+RESULTS:
   #+begin_example
   WARNING: no :cljsbuild entry found in project definition.
   --------------------------------------------------------------------------------
   WARNING: your :cljsbuild configuration is in a deprecated format.  It has been
   automatically converted it to the new format, which will be printed below.
   It is recommended that you update your :cljsbuild configuration ASAP.
   --------------------------------------------------------------------------------
   :cljsbuild
   {:builds []}
   --------------------------------------------------------------------------------
   See https://github.com/emezeske/lein-cljsbuild/blob/master/README.md
   for details on the new format.
   --------------------------------------------------------------------------------
   Compiling ClojureScript...
#+end_example

   this runs, with warnings

   
